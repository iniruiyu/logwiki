---
title: "DartåŸºç¡€çŸ¥è¯†"
meta_title: ""
description: "DartåŸºç¡€çŸ¥è¯†"
date: 2025-05-21T05:00:00Z
image: "/images/gallery/01.jpg"
categories: ["dart", "golang", "flutter"]
author: "ruiyu"
tags: ["dart", "flutter", "golang"]
draft: false
---



# 1. å˜é‡ 

## **ä¸€ã€å˜é‡å£°æ˜åŸºç¡€**

| **æ–¹å¼**                 | **ç¤ºä¾‹**                | **å…³é”®è¯´æ˜**                                |
| ------------------------ | ----------------------- | ------------------------------------------- |
| **`var`ï¼ˆæ¨èï¼‰**        | `var name = 'Bob';`     | ä¼˜å…ˆä½¿ç”¨ï¼ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼ˆå±€éƒ¨å˜é‡ï¼‰    |
| **æ˜¾å¼ç±»å‹**             | `String name = 'Bob';`  | ç±»æˆå‘˜/å‡½æ•°å‚æ•°å»ºè®®ç”¨æ˜¾å¼ç±»å‹ï¼ˆæé«˜å¯è¯»æ€§ï¼‰ |
| **`Object`ï¼ˆé€šç”¨ç±»å‹ï¼‰** | `Object name = 'Bob';`  | ä¸èƒ½ç›´æ¥è°ƒç”¨å­ç±»å‹æ–¹æ³•ï¼ˆéœ€è½¬æ¢ï¼‰            |
| **`dynamic`ï¼ˆæ…ç”¨ï¼‰**    | `dynamic name = 'Bob';` | è·³è¿‡ç±»å‹æ£€æŸ¥ï¼ˆä»…ç”¨äºåŠ¨æ€æ•°æ®å¦‚JSONï¼‰        |

> ğŸ’¡ **é‡ç‚¹**ï¼šå±€éƒ¨å˜é‡ **ä¼˜å…ˆç”¨ `var`**ï¼ˆç¬¦åˆDarté£æ ¼æŒ‡å—ï¼‰ã€‚

------

## **äºŒã€ç©ºå®‰å…¨ï¼ˆNull Safetyï¼‰**

**æ ¸å¿ƒè§„åˆ™**ï¼š**ç¦æ­¢è¿è¡Œæ—¶ `null` é”™è¯¯** â†’ ç¼–è¯‘å™¨æå‰æŠ¥é”™ï¼

| **ç±»å‹**                      | **ç¤ºä¾‹**               | **å…³é”®è§„åˆ™**                                     |
| ----------------------------- | ---------------------- | ------------------------------------------------ |
| **éç©ºç±»å‹**ï¼ˆä¸å¯ä¸º `null`ï¼‰ | `String name = 'Bob';` | **å¿…é¡»åˆå§‹åŒ–**ï¼ˆç¼–è¯‘å™¨å¼ºåˆ¶ï¼‰                     |
| **å¯ç©ºç±»å‹**ï¼ˆå¯ä¸º `null`ï¼‰   | `String? name = null;` | æœ«å°¾åŠ  `?`ï¼Œé»˜è®¤åˆå§‹åŒ–ä¸º `null`                  |
| **è®¿é—®é™åˆ¶**                  | `name.length`          | **ä¸èƒ½ç›´æ¥è°ƒç”¨å¯ç©ºå˜é‡çš„æ–¹æ³•**ï¼ˆé™¤é `as` è½¬æ¢ï¼‰ |

> âœ… **æ­£ç¡®ç”¨æ³•**ï¼š
>
> ```dart
> String? name = null;
> print(name?.length); // å®‰å…¨è®¿é—®ï¼ˆ?.ï¼šç©ºå®‰å…¨æ“ä½œç¬¦ï¼‰
> ```

------

## **ä¸‰ã€`late` ä¿®é¥°ç¬¦ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰**

**ç”¨é€”**ï¼šå£°æ˜ **éç©ºå˜é‡ä½†ä¸åœ¨åˆå§‹åŒ–æ—¶èµ‹å€¼**ï¼ˆDart æ— æ³•è‡ªåŠ¨æ£€æµ‹åˆå§‹åŒ–æ—¶æœºæ—¶ä½¿ç”¨ï¼‰

```dart
late String description; // æœªåˆå§‹åŒ–ï¼Œä½†å¿…é¡»åœ¨ä½¿ç”¨å‰èµ‹å€¼
void main() {
  description = 'Feijoada!'; // å¿…é¡»èµ‹å€¼
  print(description);
}
```

> âš ï¸ **æ³¨æ„**ï¼šè‹¥æœªåˆå§‹åŒ–å°±ä½¿ç”¨ â†’ **è¿è¡Œæ—¶é”™è¯¯**ï¼ˆ`LateInitializationError`ï¼‰ã€‚

------

## **å››ã€`final` ä¸ `const`ï¼ˆä¸å¯å˜å˜é‡ï¼‰**

| **ä¿®é¥°ç¬¦** | **åˆå§‹åŒ–æ—¶æœº** | **å¯å˜æ€§**                  | **é€‚ç”¨åœºæ™¯**                 |
| ---------- | -------------- | --------------------------- | ---------------------------- |
| `final`    | è¿è¡Œæ—¶ï¼ˆä¸€æ¬¡ï¼‰ | **å¼•ç”¨ä¸å¯å˜**ï¼ˆå†…å®¹å¯å˜ï¼‰  | å®ä¾‹å˜é‡/è¿è¡Œæ—¶å€¼            |
| `const`    | ç¼–è¯‘æ—¶ï¼ˆå¸¸é‡ï¼‰ | **å®Œå…¨ä¸å¯å˜**ï¼ˆå†…å®¹+å¼•ç”¨ï¼‰ | ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼‰ |

> âœ… **å¯¹æ¯”ç¤ºä¾‹**ï¼š
>
> ```dart
> final name = 'Bob'; // è¿è¡Œæ—¶èµ‹å€¼ï¼Œå¼•ç”¨ä¸å¯å˜
> name = 'Alice'; // âŒ é”™è¯¯ï¼šfinal åªèƒ½èµ‹å€¼ä¸€æ¬¡
> 
> const pi = 3.14; // ç¼–è¯‘æ—¶å¸¸é‡
> const list = [1, 2, 3]; // ä¸å¯å˜åˆ—è¡¨
> list.add(4); // âŒ é”™è¯¯ï¼šconst æ•°ç»„ä¸å¯å˜
> ```

> ğŸ’¡ **å…³é”®åŒºåˆ«**ï¼š
>
> - `final` å¯¹è±¡çš„**å­—æ®µå¯å˜**ï¼ˆå¦‚ `final list = [1,2]` â†’ `list.add(3)` âœ…ï¼‰
> - `const` å¯¹è±¡**å®Œå…¨ä¸å¯å˜**ï¼ˆå­—æ®µ+å¼•ç”¨å‡ä¸å¯å˜ï¼‰

------

##  **äº”ã€å…¶ä»–é‡ç‚¹**

1. **é»˜è®¤å€¼**

   - å¯ç©ºå˜é‡ï¼ˆ`String?`ï¼‰é»˜è®¤å€¼ = `null`
   - éç©ºå˜é‡ï¼ˆ`String`ï¼‰**å¿…é¡»åˆå§‹åŒ–**ï¼ˆå¦åˆ™ç¼–è¯‘æŠ¥é”™ï¼‰

   ```dart
   int? count; // é»˜è®¤ null
   int count = 0; // å¿…é¡»åˆå§‹åŒ–
   ```

2. **`_`ï¼ˆé€šé…ç¬¦å˜é‡ï¼‰**

   - ä»…ä½œå ä½ç¬¦ï¼ˆå€¼ä¸å¯è®¿é—®ï¼‰

   ```dart
   for (var _ in [1,2,3]) {} // æ— éœ€å˜é‡å
   try { ... } catch (_) {} // å¿½ç•¥å¼‚å¸¸
   ```

3. **ç©ºå®‰å…¨ä¾‹å¤–**

   - `toString()` å’Œ `hashCode` **æ”¯æŒ `null`**ï¼ˆ`null.toString()` è¿”å› `'null'`ï¼‰
   - ä½†å…¶ä»–æ–¹æ³•ï¼ˆå¦‚ `.length`ï¼‰**ä¸æ”¯æŒ** â†’ å¿…é¡»ç”¨ `?.` æˆ– `as` è½¬æ¢ã€‚

------

##  **é€ŸæŸ¥è¡¨ï¼šå˜é‡ä½¿ç”¨è§„èŒƒ**

| **åœºæ™¯**         | **æ¨èå†™æ³•**           | **é”™è¯¯å†™æ³•**            |
| ---------------- | ---------------------- | ----------------------- |
| å±€éƒ¨å˜é‡ï¼ˆæ¨èï¼‰ | `var name = 'Bob';`    | `String name = 'Bob';`  |
| å¯ç©ºç±»å‹         | `String? name = null;` | `String name = null;`   |
| è¿è¡Œæ—¶ä¸å¯å˜     | `final name = 'Bob';`  | `var name = 'Bob';`     |
| ç¼–è¯‘æ—¶å¸¸é‡       | `const pi = 3.14;`     | `final pi = 3.14;`      |
| é¿å… `dynamic`   | `String name = 'Bob';` | `dynamic name = 'Bob';` |

------

> âœ… **æ€»ç»“å£è¯€**ï¼š
>  **`var` ä¼˜å…ˆå±€éƒ¨ç”¨ï¼Œ`?` æ ‡æ˜å¯ä¸ºç©ºï¼Œ**
>  **`final` ä¸€æ¬¡èµ‹å€¼ï¼Œ`const` ç¼–è¯‘å¸¸é‡ï¼Œ**
>  **`late` å»¶è¿Ÿåˆå§‹åŒ–ï¼Œ`_` é€šé…ç¬¦å ä½ã€‚**



# 2.æ“ä½œç¬¦

##  **ä¸€ã€æ“ä½œç¬¦ä¼˜å…ˆçº§ä¸ç»“åˆæ€§ï¼ˆä»é«˜åˆ°ä½ï¼‰**

| **ç±»åˆ«**           | **æ“ä½œç¬¦**                                                  | **ç»“åˆæ€§** |
| ------------------ | ----------------------------------------------------------- | ---------- |
| **ä¸€å…ƒåç¼€**       | `expr++`, `expr--`, `()`, `[]`, `?[]`, `.`, `?.`, `!`       | æ—          |
| **ä¸€å…ƒå‰ç¼€**       | `-expr`, `!expr`, `~expr`, `++expr`, `--expr`, `await expr` | æ—          |
| **ä¹˜é™¤**           | `*`, `/`, `%`, `~/`                                         | å·¦         |
| **åŠ å‡**           | `+`, `-`                                                    | å·¦         |
| **ä½ç§»**           | `<<`, `>>`, `>>>`                                           | å·¦         |
| **ä½è¿ç®—**         | `&`, `^`, `                                                 | `          |
| **å…³ç³»ä¸ç±»å‹æ£€æŸ¥** | `>=`, `>`, `<=`, `<`, `as`, `is`, `is!`                     | æ—          |
| **ç›¸ç­‰æ€§**         | `==`, `!=`                                                  | æ—          |
| **é€»è¾‘ä¸**         | `&&`                                                        | å·¦         |
| **é€»è¾‘æˆ–**         | `                                                           |            |
| **ç©ºå®‰å…¨èµ‹å€¼**     | `??`                                                        | å·¦         |
| **æ¡ä»¶è¡¨è¾¾å¼**     | `expr1 ? expr2 : expr3`                                     | å³         |
| **çº§è”æ“ä½œ**       | `..`, `?..`                                                 | å·¦         |
| **èµ‹å€¼**           | `=`, `*=`, `/=`, `+=`, `-=`, `&=`, `^=`, ç­‰                 | å³         |
| **å±•å¼€æ“ä½œ**       | `...`, `...?`                                               | æ—          |

> âœ… "expr"æ˜¯"expression"ï¼ˆè¡¨è¾¾å¼ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ª**é€šç”¨å ä½ç¬¦**
>
> **ä¼˜å…ˆçº§è®°å¿†å£è¯€**ï¼š
>  **ä¸€å…ƒ > ä¹˜é™¤ > åŠ å‡ > ä½ç§» > ä½è¿ç®— > å…³ç³»/ç±»å‹ > ç›¸ç­‰ > é€»è¾‘ > æ¡ä»¶ > çº§è”/èµ‹å€¼**

## 1. **ç®—æœ¯æ“ä½œç¬¦**

| **æ“ä½œç¬¦** | **å«ä¹‰**              | **ç¤ºä¾‹**                 |
| ---------- | --------------------- | ------------------------ |
| `+`        | åŠ æ³•                  | `2 + 3 == 5`             |
| `-`        | å‡æ³•                  | `5 - 2 == 3`             |
| `*`        | ä¹˜æ³•                  | `2 * 3 == 6`             |
| `/`        | é™¤æ³•ï¼ˆè¿”å› `double`ï¼‰ | `5 / 2 == 2.5`           |
| `~/`       | æ•´é™¤                  | `5 ~/ 2 == 2`            |
| `%`        | å–æ¨¡                  | `5 % 2 == 1`             |
| `++`/`--`  | è‡ªå¢/è‡ªå‡             | `var a = 0; a++; // a=1` |

> âš ï¸ **æ³¨æ„**ï¼š
>
> - `var a = 0; b = a++;` â†’ `b=0`ï¼ˆåç¼€è‡ªå¢ï¼šå…ˆèµ‹å€¼ååŠ 1ï¼‰
> - `var a = 0; b = ++a;` â†’ `b=1`ï¼ˆå‰ç¼€è‡ªå¢ï¼šå…ˆåŠ 1åèµ‹å€¼ï¼‰

------

## 2. **æ¯”è¾ƒæ“ä½œç¬¦**

| **æ“ä½œç¬¦** | **å«ä¹‰** | **ç¤ºä¾‹**        |
| ---------- | -------- | --------------- |
| `==`       | ç­‰äº     | `2 == 2 â†’ true` |
| `!=`       | ä¸ç­‰äº   | `2 != 3 â†’ true` |
| `>`        | å¤§äº     | `3 > 2 â†’ true`  |
| `<`        | å°äº     | `2 < 3 â†’ true`  |
| `>=`       | å¤§äºç­‰äº | `3 >= 3 â†’ true` |
| `<=`       | å°äºç­‰äº | `2 <= 3 â†’ true` |

> âœ… **å¯¹è±¡æ¯”è¾ƒ**ï¼š
>
> ```dart
> obj1 == obj2; // è°ƒç”¨å¯¹è±¡çš„ `==` æ–¹æ³•  
> identical(obj1, obj2); // åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå†…å­˜åœ°å€ç›¸åŒï¼‰
> ```



#### 3. **ç±»å‹æ£€æŸ¥ä¸ç±»å‹è½¬æ¢**

| **æ“ä½œç¬¦** | **å«ä¹‰**     | **ç¤ºä¾‹**               |
| ---------- | ------------ | ---------------------- |
| `is`       | ç±»å‹æ£€æŸ¥     | `if (x is String) {}`  |
| `is!`      | éç±»å‹æ£€æŸ¥   | `if (x is! int) {}`    |
| `as`       | å¼ºåˆ¶ç±»å‹è½¬æ¢ | `(x as String).length` |

> âš ï¸ **å®‰å…¨è½¬æ¢**ï¼š
>
> ```dart
> if (x is String) { 
>   print(x.length); // å®‰å…¨è®¿é—® String æ–¹æ³•
> }
> ```



# 3.æ³¨é‡Š

## **Dart æ³¨é‡Šç±»å‹é€ŸæŸ¥è¡¨**

| **ç±»å‹**     | **è¯­æ³•**              | **å…³é”®è§„åˆ™**                                                 | **ç¤ºä¾‹**                                             |
| ------------ | --------------------- | ------------------------------------------------------------ | ---------------------------------------------------- |
| **å•è¡Œæ³¨é‡Š** | `//`                  | ç¼–è¯‘å™¨å¿½ç•¥ `//` ååˆ°è¡Œæœ«çš„æ‰€æœ‰å†…å®¹ï¼ˆ**ä¸å¯åµŒå¥—**ï¼‰           | `// TODO: ä¼˜åŒ–é€»è¾‘`                                  |
| **å¤šè¡Œæ³¨é‡Š** | `/* ... */`           | ç¼–è¯‘å™¨å¿½ç•¥ `/*` å’Œ `*/` ä¹‹é—´çš„å†…å®¹ï¼ˆ**æ”¯æŒåµŒå¥—**ï¼‰           | `/* è¿™æ˜¯å¤šè¡Œæ³¨é‡Š<br>å¯ä»¥è·¨è¡Œ */`                     |
| **æ–‡æ¡£æ³¨é‡Š** | `///` æˆ– `/** ... */` | **ç”Ÿæˆ API æ–‡æ¡£**ï¼Œ`[å¼•ç”¨]` ä¼šè‡ªåŠ¨é“¾æ¥åˆ°ç±»/æ–¹æ³•ï¼ˆå¦‚ `[feed]` â†’ `feed()` æ–¹æ³•ï¼‰ | `/// é¥²å–‚ç¾Šé©¼ [food]` `void feed(Food food) { ... }` |

------

##  **å…³é”®è§„åˆ™æ€»ç»“**

1. **æ–‡æ¡£æ³¨é‡Šçš„å¼•ç”¨è§„åˆ™**

   - ç”¨ `[åç§°]` å¼•ç”¨ä»£ç å…ƒç´ ï¼ˆè‡ªåŠ¨è½¬ä¸ºé“¾æ¥ï¼‰
     â†’ `[feed]` â†’ `feed()` æ–¹æ³•ï¼Œ`[Food]` â†’ `Food` ç±»
   - **å¿…é¡»åœ¨æ–‡æ¡£æ³¨é‡Šä¸­**ï¼ˆæ™®é€šæ³¨é‡Š `//` æˆ– `/* */` æ— æ•ˆï¼‰

2. **å¤šè¡Œæ³¨é‡ŠåµŒå¥—**

   ```dart
   /* è¿™æ˜¯å¤–å±‚æ³¨é‡Š
      /* è¿™æ˜¯å†…å±‚æ³¨é‡Š */  // âœ… Dart å…è®¸åµŒå¥—
   */
   ```

3. **æ–‡æ¡£æ³¨é‡Šçš„ç”Ÿæˆ**

   - ç”¨ `dart doc` ç”Ÿæˆ HTML æ–‡æ¡£ï¼ˆå¦‚ Dart API æ–‡æ¡£ï¼‰
   - **æ¨è**ï¼šæ‰€æœ‰å…¬å¼€ API å¿…é¡»æ·»åŠ æ–‡æ¡£æ³¨é‡Šï¼ˆç¬¦åˆ é«˜æ•ˆ Dart æŒ‡å—ï¼‰

------

##  **æ–‡æ¡£æ³¨é‡Šç¤ºä¾‹ï¼ˆç›´æ¥å¯ç”¨ï¼‰**

```dart
/// ä¸€åªé©¯åŒ–çš„å—ç¾éª†é©¼ç§‘åŠ¨ç‰©ï¼ˆ*Lama glama*ï¼‰ã€‚
///
/// å®‰ç¬¬æ–¯æ–‡åŒ–è‡ªå²å‰æ—¶æœŸå°±å°†ç¾Šé©¼ç”¨äºè‚‰ç±»å’Œé©®è¿ã€‚
///
/// ç¾Šé©¼éœ€è¦è¿›é£Ÿï¼Œåˆ«å¿˜äº†ç”¨ [food] é¥²å–‚å®ƒä»¬ã€‚
class Llama {
  String? name;

  /// é¥²å–‚ç¾Šé©¼ [food]ã€‚
  ///
  /// ç¾Šé©¼æ¯å‘¨å…¸å‹é£Ÿé‡ï¼š1æ†å¹²è‰ã€‚
  void feed(Food food) { ... }

  /// ç”¨ [activity] æ´»åŠ¨é”»ç‚¼ç¾Šé©¼ [timeLimit] åˆ†é’Ÿã€‚
  void exercise(Activity activity, int timeLimit) { ... }
}
```

> âœ… ç”Ÿæˆæ–‡æ¡£æ•ˆæœï¼š
>  `å–‚é£Ÿç¾Šé©¼ [food]` â†’ `[food]` ä¼šå˜æˆé“¾æ¥æŒ‡å‘ `feed()` æ–¹æ³•
>  `ç”¨ [Food] é¥²å–‚` â†’ `[Food]` ä¼šå˜æˆé“¾æ¥æŒ‡å‘ `Food` ç±»

------

###  **å¸¸è§é”™è¯¯**

| **é”™è¯¯å†™æ³•**                                  | **é—®é¢˜**                        | **æ­£ç¡®å†™æ³•**               |
| --------------------------------------------- | ------------------------------- | -------------------------- |
| `// [feed]`                                   | å•è¡Œæ³¨é‡Šæ— æ³•ç”Ÿæˆé“¾æ¥            | `/// [feed]`               |
| `/* [food] */`                                | å¤šè¡Œæ³¨é‡Šæœªç”¨ `///` æ— æ³•ç”Ÿæˆé“¾æ¥ | `/// [food]`               |
| `void feed(Food food) { ... }` ï¼ˆæ— æ–‡æ¡£æ³¨é‡Šï¼‰ | æ— æ³•è¢« `dart doc` è¯†åˆ«          | æ·»åŠ  `/// é¥²å–‚ç¾Šé©¼ [food]` |

------

###  **ç»ˆæé€ŸæŸ¥å£è¯€**

> **å•è¡Œ `//`ï¼Œå¤šè¡Œ `/\* \*/`ï¼Œæ–‡æ¡£æ³¨é‡Š `///` ç”Ÿæˆé“¾æ¥ï¼Œ**
>  **`[å¼•ç”¨]` è‡ªåŠ¨è¿æ–¹æ³•ï¼ŒAPI æ–‡æ¡£é å®ƒå‡ºã€‚**

------

> ğŸ’¡ **æ€»ç»“**ï¼š
>
> - **`///` æ˜¯ç”Ÿæˆ API æ–‡æ¡£çš„å”¯ä¸€æ­£ç¡®æ–¹å¼**ï¼ˆæ™®é€šæ³¨é‡Š `//` æ— æ•ˆï¼‰
> - **`[å¼•ç”¨]` è¯­æ³•æ˜¯ Dart æ–‡æ¡£å·¥å…·çš„æ ¸å¿ƒ**ï¼Œå¿…é¡»æŒ‰è§„èŒƒä½¿ç”¨
>   **ï¼ˆæ‰€æœ‰è§„åˆ™åŸºäº Dart 2.0+ æ–‡æ¡£æ³¨é‡Šè§„èŒƒï¼‰**



# 4. æ•°æ®ç±»å‹

## 4.1 Dart å†…ç½®ç±»å‹ï¼ˆBuilt-in Types in Dartï¼‰

### 4.1.0 æ ¸å¿ƒå†…ç½®ç±»å‹ï¼ˆCore Built-in Typesï¼‰

Dart è¯­è¨€å¯¹ä»¥ä¸‹ç±»å‹æä¾›ç‰¹æ®Šæ”¯æŒï¼ŒåŒ…æ‹¬ä½¿ç”¨**å­—é¢é‡ï¼ˆliteralsï¼‰** åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ã€‚

| ç±»å‹ï¼ˆTypeï¼‰    | è¯´æ˜ï¼ˆDescriptionï¼‰                      | ç¤ºä¾‹ï¼ˆExamplesï¼‰                                        |
| --------------- | ---------------------------------------- | ------------------------------------------------------- |
| `int`           | æ•´æ•°ï¼Œæ— å°æ•°ç‚¹                           | `var x = 1;`<br>`var hex = 0xDEADBEEF;`                 |
| `double`        | 64ä½æµ®ç‚¹æ•°ï¼ˆåŒç²¾åº¦ï¼‰                     | `var y = 1.1;`<br>`var exponents = 1.42e5;`             |
| `num`           | `int` å’Œ `double` çš„çˆ¶ç±»                 | `num x = 1;`<br>`x += 2.5; // x becomes 3.5`            |
| `String`        | å­—ç¬¦ä¸²ï¼ˆUTF-16 ç¼–ç ï¼‰                    | `var s1 = 'Hello';`<br>`var s2 = "World";`              |
| `bool`          | å¸ƒå°”å€¼ï¼š`true` æˆ– `false`                | `var isActive = true;`<br>`var isEmpty = false;`        |
| `List`          | åˆ—è¡¨ï¼ˆä¹Ÿç§°æ•°ç»„ï¼‰                         | `var list = [1, 2, 3];`<br>`var list = <int>[1, 2, 3];` |
| `Set`           | é›†åˆï¼ˆæ— åºã€å”¯ä¸€ï¼‰                       | `var set = {1, 2, 3};`                                  |
| `Map`           | æ˜ å°„ï¼ˆé”®å€¼å¯¹ï¼‰                           | `var map = {'name': 'Dart', 'age': 2};`                 |
| `Record`        | è®°å½•ï¼ˆå€¼å…ƒç»„ï¼‰                           | `var record = ('Dart', 2.15);`                          |
| `Function`      | å‡½æ•°ç±»å‹                                 | `Function add = (int a, int b) => a + b;`               |
| `Runes`         | Unicode ç ç‚¹ï¼ˆå»ºè®®ä½¿ç”¨ `characters` åŒ…ï¼‰ | `var runes = Runes('\u2665');`                          |
| `Symbol`        | ç¬¦å·ï¼ˆç”¨äºæ ‡è¯†ç¬¦ï¼‰                       | `#myVariable`, `#toString`                              |
| `null` (`Null`) | ç©ºå€¼                                     | `var value = null;`                                     |

> âœ… **æç¤ºï¼ˆTipï¼‰**: æ‰€æœ‰å˜é‡åœ¨ Dart ä¸­éƒ½å¼•ç”¨å¯¹è±¡ï¼ˆç±»çš„å®ä¾‹ï¼‰ï¼Œå› æ­¤é€šå¸¸å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œå¦‚ `Map()`ã€`Set()` ç­‰ã€‚



### 4.1.1 æ•°å­—ï¼ˆNumbersï¼‰

#### ç±»å‹è¯´æ˜

| ç±»å‹     | èŒƒå›´ï¼ˆå¹³å°ç›¸å…³ï¼‰                              | å­ç±»å‹       |
| -------- | --------------------------------------------- | ------------ |
| `int`    | -2â¶Â³ åˆ° 2â¶Â³-1ï¼ˆåŸç”Ÿï¼‰<br>-2âµÂ³ åˆ° 2âµÂ³-1ï¼ˆWebï¼‰ | `num` çš„å­ç±» |
| `double` | IEEE 754 æ ‡å‡†çš„ 64 ä½æµ®ç‚¹æ•°                   | `num` çš„å­ç±» |

#### ç¤ºä¾‹ä»£ç ï¼ˆExamplesï¼‰

```dart
// æ•´æ•°å­—é¢é‡
var x = 1;
var hex = 0xDEADBEEF;

// æµ®ç‚¹æ•°å­—é¢é‡
var y = 1.1;
var exponents = 1.42e5; // 1.42 Ã— 10^5

// int è‡ªåŠ¨è½¬ä¸º double
double z = 1; // ç­‰ä»·äº 1.0

// å­—ç¬¦ä¸²ä¸æ•°å­—è½¬æ¢
var one = int.parse('1'); // String â†’ int
var pi = double.parse('3.14'); // String â†’ double
String oneStr = 1.toString(); // int â†’ String
String piStr = 3.14159.toStringAsFixed(2); // â†’ "3.14"
```

#### ä½è¿ç®—ç¬¦ï¼ˆBitwise Operatorsï¼‰â€”â€”ä»… `int` æ”¯æŒ

```dart
assert((3 << 1) == 6); // å·¦ç§»ï¼š0011 â†’ 0110
assert((3 | 4) == 7);  // æˆ–ï¼š0011 | 0100 = 0111
assert((3 & 4) == 0);  // ä¸ï¼š0011 & 0100 = 0000
assert((3 ^ 4) == 7);  // å¼‚æˆ–
```

#### æ•°å­—åˆ†éš”ç¬¦ï¼ˆDart 3.6+ï¼‰

```dart
var million = 1_000_000;
var phone = 555_123_4567;
var mac = 0x00_14_22_01_23_45;
```

> æ•°å­—åˆ†éš”ç¬¦æ˜¯ä¸€ç§è¯­æ³•ç‰¹æ€§ï¼Œå…è®¸ä½ åœ¨æ•´æ•°æˆ–æµ®ç‚¹æ•°å­—é¢é‡ä¸­æ’å…¥ä¸‹åˆ’çº¿ `_`ï¼Œç”¨äºåˆ†ç»„æ•°å­—ï¼ˆä¾‹å¦‚æ¯ä¸‰ä½ä¸€ç»„ï¼‰ï¼Œ**ä¸ä¼šå½±å“æ•°å€¼æœ¬èº«**ï¼Œä»…ç”¨äºè§†è§‰åˆ†éš”ã€‚
>
> #### æ”¯æŒçš„æ•°å­—ç±»å‹
>
> - `int`ï¼ˆåè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ï¼‰
> - `double`ï¼ˆåè¿›åˆ¶å’Œç§‘å­¦è®¡æ•°æ³•ï¼‰
>
> #### ä½¿ç”¨è§„åˆ™
>
> - ä¸‹åˆ’çº¿åªèƒ½å‡ºç°åœ¨æ•°å­—**ä¹‹é—´**ï¼Œä¸èƒ½åœ¨å¼€å¤´ã€ç»“å°¾æˆ–ç´§é‚»å°æ•°ç‚¹/æŒ‡æ•°ç¬¦å·ã€‚
> - å¤šä¸ªä¸‹åˆ’çº¿ä¸èƒ½è¿ç»­ä½¿ç”¨ã€‚
> - ä¸èƒ½æ›¿ä»£åƒä½åˆ†éš”ç¬¦ä»¥å¤–çš„é€»è¾‘ï¼ˆå¦‚ä¸èƒ½ç”¨äºå­—ç¬¦ä¸²ï¼‰ã€‚
>
> âš ï¸ è¦æ±‚è¯­è¨€ç‰ˆæœ¬ â‰¥ 3.6ã€‚

### 4.1.2 å­—ç¬¦ä¸²ï¼ˆStringsï¼‰

#### åˆ›å»ºæ–¹å¼

```dart
var s1 = 'å•å¼•å·';
var s2 = "åŒå¼•å·";
var s3 = 'It\'s easy'; // è½¬ä¹‰
var s4 = "It's easier"; // æ¢å¼•å·æ›´ç®€å•
```

#### å­—ç¬¦ä¸²æ’å€¼ï¼ˆString Interpolationï¼‰

```dart
var name = "Dart";
var msg = "Hello, $name!"; // â†’ "Hello, Dart!"
var msg2 = "Uppercase: ${name.toUpperCase()}!"; // â†’ "DART"
```

#### æ‹¼æ¥ä¸å¤šè¡Œå­—ç¬¦ä¸²

```dart
// æ‹¼æ¥
var s = 'Hello'
        ' World'; // â†’ "Hello World"

// å¤šè¡Œå­—ç¬¦ä¸²
var multi1 = '''
Line 1
Line 2
''';

var multi2 = """Also
multi-line""";

// åŸå§‹å­—ç¬¦ä¸²ï¼ˆRaw Stringï¼‰
var raw = r'No \n newline here'; // \n ä¸è½¬ä¹‰
```

#### å­—ç¬¦ä¸²æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆCompile-time Constantsï¼‰

```dart
const a = 'constant';
const b = 42;
const c = true;

const msg = '$a $b $c'; // âœ… åˆæ³•
// const invalid = '$var'; // âŒ é const å˜é‡ä¸å¯ç”¨
```

### 4.1.3 å¸ƒå°”å€¼ï¼ˆBooleansï¼‰

- åªæœ‰ä¸¤ä¸ªå€¼ï¼š`true` å’Œ `false`ï¼ˆå‡ä¸ºç¼–è¯‘æ—¶å¸¸é‡ï¼‰
- Dart **ä¸æ”¯æŒ**éšå¼ç±»å‹è½¬æ¢ï¼ˆå¦‚ `if (obj)`ï¼‰

#### æ­£ç¡®å†™æ³•ï¼ˆExplicit Checksï¼‰

```dart
var name = '';
assert(name.isEmpty); // æ£€æŸ¥ç©ºå­—ç¬¦ä¸²

var hp = 0;
assert(hp == 0); // æ£€æŸ¥é›¶å€¼

var obj = null;
assert(obj == null); // æ£€æŸ¥ null

var nan = 0 / 0;
assert(nan.isNaN); // æ£€æŸ¥ NaN
```

------

### 4.1.4 Runes ä¸ Grapheme Clusters

- **Runes**: è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­çš„ Unicode ç ç‚¹ã€‚
- **Characters åŒ…**: æ¨èç”¨äºå¤„ç†ç”¨æˆ·æ„ŸçŸ¥çš„â€œå­—ç¬¦â€ï¼ˆgrapheme clustersï¼‰ã€‚

#### Unicode è¡¨ç¤ºæ³•

```dart
\u2665  // â™¥ (4ä½åå…­è¿›åˆ¶)
\u{1f606} // ğŸ˜† (å¤§æ‹¬å·åŒ…è£¹)
```

#### ä½¿ç”¨ `characters` åŒ…å¤„ç† emoji ç­‰å¤åˆå­—ç¬¦

```dart
import 'package:characters/characters.dart';

void main() {
  var hi = 'Hi ğŸ‡©ğŸ‡°'; // åŒ…å«å›½æ—— emoji
  print(hi.substring(hi.length - 1)); // âŒ å¯èƒ½ä¹±ç 
  print(hi.characters.last); // âœ… æ­£ç¡®è¾“å‡º ğŸ‡©ğŸ‡°
}
```



### 4.1.5 Symbol(ç°åœ¨ä¸€èˆ¬ä¸ç”¨)

- è¡¨ç¤ºç¨‹åºä¸­å£°æ˜çš„**æ ‡è¯†ç¬¦æˆ–æ“ä½œç¬¦**ã€‚
  - åœ¨ä»£ç å‹ç¼©ï¼ˆminificationï¼‰åä»ä¿æŒå”¯ä¸€æ€§ï¼Œé€‚åˆç”¨äºå…ƒç¼–ç¨‹æˆ–åå°„ APIã€‚

**Symbol** æ˜¯ Dart ä¸­ç”¨äºè¡¨ç¤ºç¨‹åºä¸­**æ ‡è¯†ç¬¦ï¼ˆå¦‚å˜é‡åã€å‡½æ•°åã€ç±»åï¼‰æˆ–æ“ä½œç¬¦ï¼ˆå¦‚ `+`ã€`[]`ï¼‰** çš„ä¸é€æ˜ã€å”¯ä¸€æ ‡è¯†ç¬¦ã€‚

- **ä¸»è¦ç”¨é€”**ï¼šåœ¨ä»£ç ç»è¿‡**å‹ç¼©ï¼ˆminificationï¼‰** åï¼Œå˜é‡åå¯èƒ½è¢«ç¼©çŸ­ä¸º `a`ã€`b` ç­‰ï¼Œä½† `Symbol` ä»èƒ½ä¿æŒå…¶åŸå§‹è¯­ä¹‰çš„å”¯ä¸€å¼•ç”¨ï¼Œå› æ­¤ç‰¹åˆ«é€‚ç”¨äº**åå°„ï¼ˆmirrorsï¼‰** å’Œ**å…ƒç¼–ç¨‹**ã€‚
- **è¯­æ³•**ï¼šä½¿ç”¨ `#` å‰ç¼€å­—é¢é‡åˆ›å»ºï¼Œä¾‹å¦‚ `#myMethod`ã€`#[]`ã€‚
- **ä¸å¯å˜ä¸”å”¯ä¸€**ï¼šä¸¤ä¸ªç›¸åŒåç§°çš„ Symbol åœ¨è¿è¡Œæ—¶æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆ`identical(#x, #x) == true`ï¼‰ã€‚
- **ä¸åŒ…å«å­—ç¬¦ä¸²å†…å®¹**ï¼šå‡ºäºå®‰å…¨å’Œå‹ç¼©è€ƒè™‘ï¼Œ`Symbol` ä¸èƒ½ç›´æ¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆé™¤éå¯ç”¨ `--enable-asserts` æˆ–ä½¿ç”¨ `MirrorSystem.getName()`ï¼‰ã€‚

> âš ï¸ æ³¨æ„ï¼šDart çš„ Web ç¼–è¯‘ï¼ˆå¦‚ dart2jsï¼‰é»˜è®¤ä¼šæ··æ·†æ ‡è¯†ç¬¦ï¼Œæ­¤æ—¶åªæœ‰ `Symbol` èƒ½å¯é å¼•ç”¨åŸå§‹åç§°ã€‚

```dart
/*#myVariable
#toString
#==*/
import 'dart:mirrors';

void main() {
  Symbol methodName = #toString;
  Symbol operator = #[];

  // é€šè¿‡åå°„è°ƒç”¨æ–¹æ³•
  ClassMirror cm = reflectClass(String);
  MethodMirror method = cm.declarations[methodName] as MethodMirror;
  print(method.simpleName); // Symbol("toString")

  // æ“ä½œç¬¦ç¤ºä¾‹
  print(operator); // Symbol("[]")
}
```

> âœ… Symbol å­—é¢é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚
>
> ##### ä½¿ç”¨åœºæ™¯
>
> - åå°„ APIï¼ˆ`dart:mirrors`ï¼Œä»…é™ VMï¼ŒWeb ä¸æ”¯æŒï¼‰
> - åŠ¨æ€è°ƒç”¨æ–¹æ³•åï¼ˆéœ€é…åˆè¿è¡Œæ—¶ä¿¡æ¯ï¼‰
> - æ¡†æ¶è®¾è®¡ä¸­ä½œä¸ºâ€œå®‰å…¨çš„åç§°å¼•ç”¨â€ï¼ˆé¿å…å­—ç¬¦ä¸²ç¡¬ç¼–ç ï¼‰
>
> > ğŸ“Œ å®é™…æç¤ºï¼šç”±äº `dart:mirrors` åœ¨ Flutter å’Œ Web ä¸­ä¸å¯ç”¨ï¼Œ**Symbol åœ¨ç°ä»£ Dart å¼€å‘ä¸­ä½¿ç”¨è¾ƒå°‘**ï¼Œä½†åœ¨æŸäº›ä¾èµ–åå°„çš„æœåŠ¡å™¨ç«¯æˆ–æµ‹è¯•å·¥å…·ä¸­ä»æœ‰ä»·å€¼ã€‚

### 4.1.6 å…¶ä»–é‡è¦ç±»å‹ï¼ˆOther Important Typesï¼‰

| ç±»å‹                | è¯´æ˜                                               |
| ------------------- | -------------------------------------------------- |
| `Object`            | æ‰€æœ‰ç±»çš„æ ¹ç±»ï¼ˆé™¤ `Null`ï¼‰                          |
| `Enum`              | æ‰€æœ‰æšä¸¾ç±»å‹çš„çˆ¶ç±»                                 |
| `Future` / `Stream` | ç”¨äºå¼‚æ­¥ç¼–ç¨‹                                       |
| `Iterable`          | ç”¨äº `for-in` å¾ªç¯å’Œç”Ÿæˆå™¨å‡½æ•°                     |
| `Never`             | è¡¨ç¤ºè¡¨è¾¾å¼**æ°¸è¿œä¸ä¼šæˆåŠŸæ‰§è¡Œå®Œæˆ**ï¼ˆå¦‚æ€»æ˜¯æŠ›å¼‚å¸¸ï¼‰ |
| `dynamic`           | å…³é—­é™æ€ç±»å‹æ£€æŸ¥ï¼ˆä¸æ¨èï¼Œå»ºè®®ç”¨ `Object?`ï¼‰       |
| `void`              | è¡¨ç¤º**ä¸å…³å¿ƒè¿”å›å€¼**ï¼Œå¸¸ç”¨äºå‡½æ•°è¿”å›ç±»å‹           |

### 4.1.7 ç±»å‹åœ¨ç»§æ‰¿ä½“ç³»ä¸­çš„ç‰¹æ®Šè§’è‰²

- `Object`: æ‰€æœ‰ç±»å‹çš„è¶…ç±»ï¼ˆ`Null` é™¤å¤–ï¼‰
- `Null`: `null` çš„ç±»å‹ï¼Œä¸ `Object?` å…¼å®¹
- `Never`: æœ€åº•å±‚ç±»å‹ï¼Œå¯èµ‹å€¼ç»™ä»»ä½•ç±»å‹
- `Object?`: `Object` çš„å¯ç©ºç‰ˆæœ¬ï¼Œæ˜¯ `Object` å’Œ `Null` çš„è”åˆç±»å‹



## 4.2 Records è®°å½•

### 4.2.1 ä»€ä¹ˆæ˜¯ Recordsï¼Ÿ

#### What Are Records?

**Records** æ˜¯ Dart 3.0 å¼•å…¥çš„ä¸€ç§ **åŒ¿åã€ä¸å¯å˜çš„èšåˆæ•°æ®ç±»å‹ï¼ˆaggregate typeï¼‰**ï¼Œå…è®¸å¼€å‘è€…å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå•ä¸€çš„æ•´ä½“ã€‚å®ƒæ— éœ€é¢„å…ˆå®šä¹‰ç±»ï¼Œå³å¯å®ç°ç»“æ„åŒ–æ•°æ®çš„å°è£…ï¼Œç±»ä¼¼äºå…ƒç»„ï¼ˆtupleï¼‰ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚

ä¸ä¼ ç»Ÿçš„é›†åˆç±»å‹ï¼ˆå¦‚ `List`ã€`Map`ï¼‰ç›¸æ¯”ï¼ŒRecords å…·æœ‰ä»¥ä¸‹å…³é”®ç‰¹æ€§ï¼š

| å¯¹æ¯”ç»´åº¦         | Records ç‰¹æ€§                                 | å…¶ä»–é›†åˆç±»å‹ï¼ˆå¦‚ List/Mapï¼‰             |
| ---------------- | -------------------------------------------- | --------------------------------------- |
| **å¤§å°**         | å›ºå®šé•¿åº¦ï¼ˆåˆ›å»ºåå­—æ®µæ•°é‡ä¸å¯å˜ï¼‰             | å¯å˜é•¿åº¦                                |
| **å…ƒç´ ç±»å‹**     | å¼‚æ„ï¼ˆä¸åŒå­—æ®µå¯æ‹¥æœ‰ä¸åŒç±»å‹ï¼‰               | é€šå¸¸åŒæ„ï¼ˆå•ä¸€ç±»å‹ä¸ºä¸»ï¼‰                |
| **å¯å˜æ€§**       | ä¸å¯å˜ï¼ˆåˆ›å»ºåæ— æ³•ä¿®æ”¹å­—æ®µå€¼ï¼‰               | å¯å˜                                    |
| **ç±»å‹å®šä¹‰æ–¹å¼** | ç»“æ„åŒ–ç±»å‹ï¼ˆç”±å­—æ®µç±»å‹ã€åç§°ã€é¡ºåºå…±åŒå†³å®šï¼‰ | ç‹¬ç«‹ç±»å‹å£°æ˜ï¼ˆéœ€ `class` æˆ– `typedef`ï¼‰ |

```dart
// ç¤ºä¾‹ï¼šåŒ…å«ä½ç½®å­—æ®µå’Œå‘½åå­—æ®µçš„æ··åˆ Record
var record = ('first', a: 2, b: true, 'last');
```

âœ… **ä¸­æ–‡è¯´æ˜**ï¼š
 Record å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªâ€œè½»é‡çº§æ•°æ®å®¹å™¨â€ï¼Œé€‚ç”¨äºä¸´æ—¶æ‰“åŒ…ç›¸å…³æ•°æ®ï¼Œä¾‹å¦‚ `(ç”¨æˆ·å, å¹´é¾„, æ˜¯å¦ç™»å½•)`ï¼Œè€Œæ— éœ€ä¸“é—¨å®šä¹‰ä¸€ä¸ªç±»ã€‚

âœ… **English Explanation**:
 A Record acts as a "lightweight data container" that bundles related valuesâ€”e.g., `(username, age, isLoggedIn)`â€”without requiring a dedicated class.



### 4.2.2 æ ¸å¿ƒä¼˜åŠ¿

#### Core Advantages of Records

#### 1. æ”¯æŒå¤šè¿”å›å€¼å‡½æ•° âœ…

##### 1. Multiple Return Values from Functions âœ…

åœ¨ Dart 3.0 ä¹‹å‰ï¼Œå‡½æ•°åªèƒ½è¿”å›å•ä¸ªå€¼ã€‚è‹¥éœ€è¿”å›å¤šä¸ªå€¼ï¼Œé€šå¸¸éœ€è¦å€ŸåŠ© `Map`ã€`List` æˆ–è‡ªå®šä¹‰ `class`ï¼Œå¸¦æ¥é¢å¤–å¼€é”€ã€‚ç°åœ¨ï¼ŒRecords è®©å‡½æ•°å¯ä»¥ç›´æ¥è¿”å›å¤šä¸ªå€¼ï¼Œå¹¶æ”¯æŒè§£æ„èµ‹å€¼ã€‚

```dart
// å‡½æ•°è¿”å›å§“åå’Œå¹´é¾„
(String name, int age) parseUser(Map<String, dynamic> json) {
  return (json['name'] as String, json['age'] as int);
}

// è°ƒç”¨å¹¶è§£æ„
var (name, age) = parseUser({'name': 'Alice', 'age': 25});
print('Hello, $name! You are $age years old.');
// è¾“å‡ºï¼šHello, Alice! You are 25 years old.
```

ğŸ”¹ **ä¼˜åŠ¿**ï¼š

- å‡å°‘æ ·æ¿ä»£ç ï¼ˆboilerplateï¼‰
- æé«˜å¯è¯»æ€§ä¸ç±»å‹å®‰å…¨æ€§
- é¿å…ä¸ºç®€å•åœºæ™¯åˆ›å»ºé¢å¤–ç±»

ğŸ”¹ **Benefits**:

- Reduces boilerplate code
- Enhances readability and type safety
- Avoids creating classes for simple use cases

------

#### 2. ç±»å‹å®‰å…¨çš„æ•°æ®ç»“æ„ âœ…

##### 2. Type-Safe Data Structures âœ…

Records æ˜¯**ç»“æ„åŒ–ç±»å‹ï¼ˆstructurally typedï¼‰**ï¼Œç¼–è¯‘å™¨èƒ½æ ¹æ®å­—æ®µçš„ç±»å‹ã€æ•°é‡å’Œé¡ºåºè¿›è¡Œç²¾ç¡®çš„ç±»å‹æ¨æ–­ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ã€‚

```dart
(int, String) coordinates = (100, 'North');

var x = coordinates.$1;    // é™æ€ç±»å‹ä¸º int
var direction = coordinates.$2; // é™æ€ç±»å‹ä¸º String
```

ğŸ”¹ æ‰€æœ‰å­—æ®µè®¿é—®éƒ½åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯ã€‚

ğŸ”¹ All field accesses are checked at compile time â†’ safer and more predictable.

------

#### 3. è‡ªåŠ¨ç›¸ç­‰æ€§åˆ¤æ–­ âœ…

##### 3. Built-in Equality Check âœ…

Records é»˜è®¤å®ç°äº†åŸºäºå­—æ®µå€¼çš„ `==` æ¯”è¾ƒé€»è¾‘ã€‚åªè¦æ‰€æœ‰å­—æ®µå€¼ç›¸åŒï¼Œä¸¤ä¸ª Record å³è¢«è§†ä¸ºç›¸ç­‰ï¼Œå³ä½¿å˜é‡åæˆ–å­—æ®µæ ‡ç­¾ä¸åŒã€‚

```dart
(int x, int y) pointA = (3, 4);
(int u, int v) pointB = (3, 4);

print(pointA == pointB); // true â€” å­—æ®µå€¼å®Œå…¨åŒ¹é…
```

ğŸ”¹ é€‚ç”¨äºï¼š

- å•å…ƒæµ‹è¯•ä¸­çš„æ–­è¨€
- é›†åˆå»é‡ï¼ˆå¦‚ `Set<Record>`ï¼‰
- ç¼“å­˜é”®å€¼æ¯”è¾ƒ

ğŸ”¹ Useful for:

- Assertions in unit tests
- Deduplication in sets
- Cache key comparisons

------





### 4.2.3 è¯­æ³•è¯¦è§£

#### 4.2.3 Syntax Deep Dive

##### 1. åŸºç¡€è¯­æ³•ç»“æ„

Records æ”¯æŒä¸‰ç§å­—æ®µç»„åˆæ–¹å¼ï¼š**ä»…ä½ç½®å­—æ®µ**ã€**ä»…å‘½åå­—æ®µ**ã€**æ··åˆå­—æ®µ**ã€‚

(1) ä»…ä½ç½®å­—æ®µï¼ˆPositional Fieldsï¼‰

```dart
(int, String) getUser() => (25, 'Lily');

var (age, name) = getUser();
print('$name is $age years old.'); // Lily is 25 years old.
```

- ä½¿ç”¨åœ†æ‹¬å· `(T1, T2, ...)` å®šä¹‰
- å­—æ®µé€šè¿‡ `$1`, `$2`, ... è®¿é—®
- é¡ºåºæ•æ„Ÿ

(2) ä»…å‘½åå­—æ®µï¼ˆNamed Fieldsï¼‰

```dart
({double lat, double lng}) location = (lat: 39.9042, lng: 116.4074);

print('Latitude: ${location.lat}'); // Latitude: 39.9042
```

- ä½¿ç”¨ `{T name}` å®šä¹‰ï¼Œç±»å‹å¯é€‰ï¼ˆæ¨èæ˜¾å¼å£°æ˜ï¼‰
- è°ƒç”¨æ—¶å­—æ®µå¯ä¹±åº
- æ›´å…·å¯è¯»æ€§ï¼Œé€‚åˆ API å‚æ•°ä¼ é€’

(3) æ··åˆå­—æ®µï¼ˆMixed Fieldsï¼‰

```dart
var record = ('start', value: 42, active: true, 'end');

print(record.$1);        // 'start' â€” ç¬¬ä¸€ä¸ªä½ç½®å­—æ®µ
print(record.value);     // 42 â€” å‘½åå­—æ®µ
print(record.$2);        // 'end' â€” ç¬¬äºŒä¸ªä½ç½®å­—æ®µ
// æ³¨æ„ï¼šå‘½åå­—æ®µä¸å ç”¨ä½ç½®ç¼–å·
```

> âš ï¸ **é‡è¦è§„åˆ™**ï¼šæ··åˆ Record çš„ç»“æ„ä¸º `(positional..., named...)`ï¼Œå‘½åå­—æ®µå¿…é¡»æ”¾åœ¨æœ«å°¾ã€‚

------

##### 2. è§£æ„ä¸æ¨¡å¼åŒ¹é…ï¼ˆDestructuring & Pattern Matchingï¼‰

Records å¤©ç„¶æ”¯æŒè§£æ„èµ‹å€¼ï¼Œæå¤§æå‡å‡½æ•°å¼ç¼–ç¨‹ä½“éªŒã€‚

```dart
// å®Œå…¨è§£æ„
var (x, y) = (10, 20);

// éƒ¨åˆ†è§£æ„ï¼ˆå¿½ç•¥æŸäº›å­—æ®µï¼‰
var (:, y) = (100, 200); // å¿½ç•¥ç¬¬ä¸€ä¸ªå­—æ®µ
print(y); // 200

// å‘½åå­—æ®µè§£æ„
var (title: t, :year) = (title: 'Dart Guide', year: 2025);
print('$t ($year)'); // Dart Guide (2025)
```

ğŸ”¹ æ”¯æŒåœ¨ `for-in`ã€`switch`ã€å‡½æ•°å‚æ•°ä¸­ä½¿ç”¨æ¨¡å¼ï¼š

```dart
void processPoint((int, int) point) {
  switch (point) {
    case (0, 0):
      print("Origin");
    case (var x, 0):
      print("On X-axis at $x");
    case (0, var y):
      print("On Y-axis at $y");
    case (var x, var y):
      print("At ($x, $y)");
  }
}
```

------

##### 3. ç±»å‹åˆ«åæå‡å¯è¯»æ€§ï¼ˆType Aliasesï¼‰

å¯¹äºé‡å¤ä½¿ç”¨çš„ Record ç»“æ„ï¼Œå»ºè®®ä½¿ç”¨ `typedef` æé«˜ä»£ç å¯ç»´æŠ¤æ€§ã€‚

```dart
typedef Coordinate = (double lat, double lng);
typedef UserInfo = ({String name, int age});

void main() {
  List<UserInfo> users = [(name: 'Alice', age: 30), (name: 'Bob', age: 28)];
  Coordinate home = (39.9042, 116.4074);
  print(home.$1);
  print(users[0].name.toUpperCase());
}
```

âœ… æ¨èåœ¨å›¢é˜Ÿé¡¹ç›®ä¸­ä¸ºå¸¸ç”¨ Record å®šä¹‰åˆ«åï¼Œå¢å¼ºæ¥å£æ¸…æ™°åº¦ã€‚

------

### 4.2.4 å…¸å‹åº”ç”¨åœºæ™¯

#### 4.2.4 Typical Use Cases

#### 1. ä¸´æ—¶æ•°æ®å®¹å™¨ï¼ˆTemporary Data Containersï¼‰

åœ¨ UI æ„å»ºä¸­ä¼ é€’æŒ‰é’®æ ‡ç­¾å’Œå›¾æ ‡ï¼Œæ— éœ€åˆ›å»ºé¢å¤–ç±»ã€‚

```dart
final buttons = [
  (label: "Upload", icon: Icons.upload),
  (label: "Settings", icon: Icons.settings)
];
```

####  2. å‡½æ•°å‚æ•°åˆ†ç»„ï¼ˆFunction Parameter Groupingï¼‰

å°†å¤šä¸ªé…ç½®é¡¹æ‰“åŒ…ä¼ é€’ï¼Œæå‡å‡½æ•°è°ƒç”¨çš„å¯è¯»æ€§ã€‚

```dart
void showDialog(({String title, String content, bool? dismissible}) config) {
  // å¤„ç†å¯¹è¯æ¡†é€»è¾‘
}

// è°ƒç”¨ç¤ºä¾‹
showDialog(
  (title: "Alert", content: "Are you sure?", dismissible: true)
);
```

#### 3. æ•°æ®å¤„ç†ç®¡é“ï¼ˆData Processing Pipelinesï¼‰

åœ¨ `map`ã€`where` ç­‰é“¾å¼æ“ä½œä¸­æµè½¬ä¸­é—´æ•°æ®ç»“æ„ã€‚

```dart
final result = data
  .where((item) => item.active)
  .map((item) => (item.name, item.score))
  .toList();
```

#### 4. API è¿”å›å€¼å°è£…ï¼ˆAPI Return Value Wrappingï¼‰

ç½‘ç»œè¯·æ±‚è¿”å›çŠ¶æ€ä¸æ•°æ®ï¼Œé¿å…ä½¿ç”¨ `Map` æˆ–è‡ªå®šä¹‰ Result ç±»ã€‚

```dart
(Failure?, User?) login(String username, String password) async {
  try {
    final user = await api.login(username, password);
    return (null, user);
  } on Failure catch (f) {
    return (f, null);
  }
}
```

------

### 4.2.5 å±€é™æ€§ä¸æ›¿ä»£æ–¹æ¡ˆ

#### Limitations and Alternatives

å°½ç®¡ Records åŠŸèƒ½å¼ºå¤§ï¼Œä½†ä»å­˜åœ¨ä»¥ä¸‹é™åˆ¶ï¼Œéœ€è°¨æ…è¯„ä¼°ä½¿ç”¨åœºæ™¯ã€‚

| é™åˆ¶é¡¹               | è¯´æ˜                                      | å»ºè®®æ›¿ä»£æ–¹æ¡ˆ                                |
| -------------------- | ----------------------------------------- | ------------------------------------------- |
| âŒ **ä¸å¯å˜æ€§**       | åˆ›å»ºåæ— æ³•ä¿®æ”¹å­—æ®µå€¼                      | ä½¿ç”¨ `class` + `copyWith` æ¨¡å¼              |
| âŒ **æ— æ–¹æ³•æ”¯æŒ**     | ä»…å­˜å‚¨æ•°æ®ï¼Œä¸èƒ½å®šä¹‰è¡Œä¸ºï¼ˆå¦‚ `toJson()`ï¼‰ | å‡çº§ä¸º `class` æˆ–ä½¿ç”¨ **Extension Methods** |
| âŒ **ç±»å‹å…¼å®¹æ€§ä¸¥æ ¼** | å­—æ®µåæˆ–é¡ºåºä¸åŒå³è§†ä¸ºä¸åŒç±»å‹            | ä½¿ç”¨ç»Ÿä¸€ `typedef` æˆ–æŠ½è±¡æ¥å£               |
| âŒ **æ€§èƒ½è€ƒé‡**       | é«˜é¢‘åˆ›å»ºå¯èƒ½å½±å“æ€§èƒ½ï¼ˆå¦‚å¾ªç¯ä¸­ï¼‰          | å¯¹å¤§æ•°æ®é›†ä½¿ç”¨é¢„å®šä¹‰ `class`                |

------

####  ä½•æ—¶åº”ä½¿ç”¨ `class` æ›¿ä»£ Recordï¼Ÿ

å½“æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æ—¶ï¼Œå»ºè®®ä½¿ç”¨ `class`ï¼š

- âœ… éœ€è¦å°è£…è¡Œä¸ºï¼ˆå¦‚ `validate()`ã€`toJson()`ï¼‰
- âœ… æ•°æ®ç»“æ„é•¿æœŸå­˜åœ¨æˆ–è·¨æ¨¡å—å…±äº«
- âœ… éœ€è¦ç»§æ‰¿ã€å¤šæ€æˆ–ç§æœ‰å­—æ®µ
- âœ… é¢‘ç¹ä¿®æ”¹çŠ¶æ€ï¼ˆå¦‚å“åº”å¼çŠ¶æ€ç®¡ç†ï¼‰

##### ç¤ºä¾‹ï¼šä» Record å‡çº§ä¸º `class`

```dart
class UserProfile {
  final String name;
  final int age;
  final bool isActive;

  const UserProfile(this.name, this.age, this.isActive);

  Map<String, dynamic> toJson() => {
        'name': name,
        'age': age,
        'active': isActive,
      };

  UserProfile copyWith({String? name, int? age, bool? isActive}) {
    return UserProfile(
      name ?? this.name,
      age ?? this.age,
      isActive ?? this.isActive,
    );
  }
}
```

> ğŸ’¡ **è®¾è®¡å»ºè®®**ï¼š
>  ä½¿ç”¨ Record å¿«é€ŸåŸå‹ï¼Œç”¨ `class` æ„å»ºç¨³å®šæ¨¡å‹ã€‚ä¸¤è€…äº’è¡¥ï¼Œè€Œéæ›¿ä»£ã€‚

------

âœ… **ä¼˜åŒ–è¯´æ˜**ï¼š

- ç§»é™¤äº†è¡¨æ ¼ä¸­åµŒå¥—ä»£ç çš„é—®é¢˜
- æ”¹ç”¨â€œå°èŠ‚æ ‡é¢˜ + ä»£ç å—â€ç»“æ„ï¼Œæ›´æ¸…æ™°
- ä¿ç•™ä¸­è‹±åŒè¯­æ ‡é¢˜ï¼Œä¾¿äºå›½é™…åŒ–æ–‡æ¡£
- æ‰€æœ‰ä»£ç å‡å¯æ­£ç¡®æ¸²æŸ“



------

### 4.2.6 æœ€ä½³å®è·µä¸æ€§èƒ½ä¼˜åŒ–

#### 4.2.6 Best Practices and Performance Tips

##### æ¨èä½¿ç”¨åœºæ™¯ï¼ˆRecommended Use Casesï¼‰

- å‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼ˆå¦‚è§£æ JSONï¼‰
- ä¸´æ—¶ä¸­é—´æ•°æ®ï¼ˆå¦‚ `map` è¾“å‡ºï¼‰
- é…ç½®å‚æ•°åˆ†ç»„ï¼ˆé¿å…è¿‡å¤šå‚æ•°ï¼‰
- ç®€å•æ•°æ®æ˜ å°„ï¼ˆå¦‚é”®å€¼å¯¹å¢å¼ºç‰ˆï¼‰

##### é¿å…ä½¿ç”¨åœºæ™¯ï¼ˆAvoid Whenï¼‰

- éœ€è¦é¢‘ç¹æ›´æ–°å­—æ®µï¼ˆRecords æ˜¯ immutableï¼‰
- åŒ…å«å¤æ‚ä¸šåŠ¡é€»è¾‘
- ä½œä¸ºæ¨¡å‹å±‚æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆé•¿æœŸç»´æŠ¤ï¼‰
- è·¨ç‰ˆæœ¬ API è¿”å›å€¼ï¼ˆç»“æ„å˜åŒ–æ˜“å¯¼è‡´å…¼å®¹é—®é¢˜ï¼‰

##### æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼ˆPerformance Tipsï¼‰

| æŠ€å·§                      | è¯´æ˜                                                  |
| ------------------------- | ----------------------------------------------------- |
| ğŸ”¹ é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹åˆ›å»º    | åœ¨ `for` å¾ªç¯å†…å¤§é‡åˆ›å»º Record å¯èƒ½å½±å“æ€§èƒ½           |
| ğŸ”¹ å¤§æ•°æ®é›†ä½¿ç”¨ç±»          | å¦‚å¤„ç†ä¸Šåƒæ¡è®°å½•ï¼Œä¼˜å…ˆä½¿ç”¨ `class` æå‡æ•ˆç‡           |
| ğŸ”¹ ä½¿ç”¨ `typedef` ç»Ÿä¸€ç±»å‹ | å‡å°‘é‡å¤ä¹¦å†™ï¼Œæå‡å¯ç»´æŠ¤æ€§                            |
| ğŸ”¹ åˆç†é€‰æ‹©å­—æ®µç±»å‹        | ä¼˜å…ˆä½¿ç”¨å‘½åå­—æ®µæå‡ API å¯è¯»æ€§ï¼Œä½ç½®å­—æ®µç”¨äºç®€å•åœºæ™¯ |

------

## æ€»ç»“å›é¡¾ï¼ˆSummaryï¼‰

| ç« èŠ‚      | ä¸»è¦å†…å®¹                                           |
| --------- | -------------------------------------------------- |
| **4.2.1** | Records æ˜¯åŒ¿åã€ä¸å¯å˜ã€ç»“æ„åŒ–ç±»å‹çš„èšåˆæ•°æ®å®¹å™¨   |
| **4.2.2** | æ”¯æŒå¤šè¿”å›å€¼ã€ç±»å‹å®‰å…¨ã€è‡ªåŠ¨ç›¸ç­‰æ¯”è¾ƒ               |
| **4.2.3** | æ”¯æŒä½ç½®/å‘½å/æ··åˆå­—æ®µï¼Œæ”¯æŒè§£æ„ä¸æ¨¡å¼åŒ¹é…         |
| **4.2.4** | é€‚ç”¨äºä¸´æ—¶æ•°æ®ã€å‡½æ•°ä¼ å‚ã€æ•°æ®æµæ°´çº¿ç­‰åœºæ™¯         |
| **4.2.5** | æœ‰ä¸å¯å˜ã€æ— æ–¹æ³•ã€ç±»å‹ä¸¥æ ¼ç­‰é™åˆ¶ï¼Œå¿…è¦æ—¶åº”å‡çº§ä¸ºç±» |
| **4.2.6** | æ¨èç”¨äºè½»é‡çº§åœºæ™¯ï¼Œé¿å…æ»¥ç”¨ï¼Œæ³¨æ„æ€§èƒ½ä¸å¯ç»´æŠ¤æ€§   |

> ğŸ’¬ **æœ€ç»ˆå»ºè®®**ï¼š
>  å°† Records è§†ä¸º Dart å¼€å‘ä¸­çš„â€œç‘å£«å†›åˆ€â€â€”â€”å°å·§ã€çµæ´»ã€é«˜æ•ˆï¼Œä½†ä¸æ›¿ä»£ä¸»å·¥å…·ï¼ˆç±»ï¼‰ã€‚åˆç†ä½¿ç”¨ï¼Œå¯æ˜¾è‘—æå‡ä»£ç ç®€æ´æ€§ä¸å¼€å‘æ•ˆç‡ã€‚

> ğŸ’¬ **Final Recommendation**:
>  Treat Records as the "Swiss Army knife" of Dartâ€”compact, flexible, and efficientâ€”but not a replacement for full classes. Use them wisely to enhance code clarity and productivity.

------

å¦‚æœä½ æ­£åœ¨ç¼–å†™ **Flutter åº”ç”¨ã€Dart CLI å·¥å…·æˆ–æœåŠ¡ç«¯ API**ï¼Œç°åœ¨å°±å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®å°è¯•å¼•å…¥ Recordsï¼š

- `Future<(bool, String)> login()` è¿”å›ç»“æœ
- `map((item) => (item.id, item.name))` æ•°æ®è½¬æ¢
- `({String label, IconData icon}) config` å‚æ•°ä¼ é€’